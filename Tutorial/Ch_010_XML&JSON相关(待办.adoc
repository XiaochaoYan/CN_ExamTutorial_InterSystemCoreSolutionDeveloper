
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
ifndef::imagesdir[:imagesdir: ../Img]

= XML & JSON 相关在 ObjectScript 中的应用 +
JSON (JavaScript Object Notation) 是一种轻量级的数据交换格式 +
在 ObjectScript 中有以下 3个 类Class 与 JSON有关 +
1. %DynamicObject +
2. %DynamicArray +
3. %DynamicAbstractObject (the common superclass） 抽象类，被上 2 者继承 +

== %DynamicObject 常用方法 +
1. %Get() 2. %GetIterator() 3. %IsDefined() 4. %OnNew() 5. %Remove() 6. %Set() +
常用方法_官方例子 +

image::IRIS_022.png[]

== 从 JSON 到 ObjectScript +

1. 使用 %FromJson 将 JSON 数据读取+ 
----
set dynamicObject = ##class(%DynamicObject).%FromJSON(JSONstring)
----

2. 新建了 动态实例 Dynamic Object 后，利用 Set 语句可以正对各个实例的属性进行修改， SET 语句有两种使用方法，可以完全互换 +
----
set dynamicObject.source = "website"
或者
do dynamicObject.%Set("timestamp",$zdatetime($h,3))
----

== 从 ObjectScript 到 JSON +
----
set reviewObject = ##class(%DynamicObject).%New()
set reviewObject.Rating = 5
set reviewObject.Review = "Service was Great!"
set reviewObject.Reviewer = "John Smith"

set tagsArray = ##class(%DynamicObject).%New()
do tagsArray.%Push("Family Friendly")
do tagsArray.%Push("Romantic")


----


= 官方资料 +
1. https://docs.intersystems.com/iris20212/csp/docbook/Doc.View.cls?KEY=ITECHREF_json[EN_JSON 相关概念汇总] +
2. https://docs.intersystems.com/iris20212/csp/docbook/DocBook.UI.Page.cls?KEY=GJSON[EN_JSON 操作汇总] +
3. https://learning.intersystems.com/enrol/index.php?id=972[EN_JSON导入导出 Course版教程(老版 部分可用] +
